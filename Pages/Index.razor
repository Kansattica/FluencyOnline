@page "/"
@using FluencyOnline.Models;

<h1>Welcome!</h1>
<EditForm Model="@model">
    Code: <br/>
    <InputTextArea id="code-input" @bind-value:event="oninput" @bind-value="@model.Code" class="form-control codebox codeelement" rows="@codeHeight" spellcheck="false"/>
    <ExamplePicker ChangedSelection="@ExampleSelected" /> <br/>

    Input: <br/>
    <InputTextArea id="input-input" @bind-value:event="oninput"  @bind-value="@model.Input" class="form-control codebox codeelement" rows="5" spellcheck="false"/>
</EditForm>

<CodeOutput @bind-Program="@model.Code" @bind-Input="@model.Input"  />


@code {
    private FluencyModel model {get; set;} = new FluencyModel();
    private int codeHeight = 5;

    private void ExampleSelected(UIChangeEventArgs e)
    {
        if (e.Value is string)
        {
            model.Code = e.Value as string;
            int height = model.Code.Count(c => c == '\n') + 1;
            codeHeight = (height < 5) ? 5 : height;
        }
    }
}